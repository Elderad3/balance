<section class="content-header">
  <h1>
    Cálculo de Financiamento PRICE
    <small>Calcule prestações, juros, amortização e saldo devedor de um financiamento pelo PRICE (Sistema de Prestação
      Constante)</small>
  </h1>
</section>
<section class="content">
  <form class="form-horizontal" autocomplete="off" #priceForm="ngForm" id="priceForm"
    [ngFormOptions]="{ updateOn: 'change' }">
    <div class="row">
      <div class="col-md-12">
        <div class="box box-primary">
          <div class="box-header with-border">
            <h3 class="box-title">Tabela PRICE</h3>
          </div>

          <div class="form-horizontal">
            <div class="box-body">
              <div class="form-group">
                <label class="col-sm-2">
                  Valor do Financiamento:
                </label>
                <div class="col-sm-3">
                  <input currencyMask name="valor" [(ngModel)]="valor" class="form-control input-sm"
                    [options]="{allowNegative: false }" required />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-1">
                  Taxa:
                </label>
                <div class="col-sm-1">
                  <div class="radio">
                    <label>
                      <input type="radio" required [disabled]="calculado === true" name="tipoTaxa"
                        [(ngModel)]="tipoTaxa" id="optionsRadios1" value="AOMES" checked="">
                      % Ao Mês
                    </label>
                  </div>
                </div>
                <div class="col-sm-1">
                  <div class="radio">
                    <label>
                      <input type="radio" name="tipoTaxa" [(ngModel)]="tipoTaxa" id="optionsRadios2" value="AOANO"
                        checked="">
                      % Ao Ano
                    </label>
                  </div>
                </div>
                <div class="col-sm-2">
                  <input currencyMask name="taxa" [(ngModel)]="taxa" class="form-control input-sm"
                    [options]="{allowNegative: false }" required />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3">
                  Período (Número de Meses):
                </label>

                <div class="col-sm-2">
                  <input currencyMask name="periodo" [(ngModel)]="periodo" class="form-control input-sm"
                    [options]="{allowNegative: false, precision: 0 }" required min="1" max="360" maxlength="3" />
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <button class="btn btn-primary btn-sm" style="margin-bottom: 5px" type="button"
                    [disabled]="priceForm.invalid" (click)="calcular()">Calcular</button>
                  <button class="btn btn-default btn-sm" style="margin-bottom: 5px; margin-left: 10px" type="button"
                    [disabled]="priceForm.invalid" (click)="limparFormulario()">Limpar Formulário</button>
                </div>
              </div>
              <div *ngIf="parcelas.length" class="row">
                <div class="col-md-12">
                  <h4>Resumo</h4>
                  <div class="box box-widget widget-user-2">
                    <div class="box-footer no-padding">
                      <ul class="nav nav-stacked">
                        <li><a>Valor do Financiamento: <span class="pull-right badge bg-blue">{{valor | number:
                              "1.2-2"}}</span></a></li>
                        <li><a>Período: <span class="pull-right badge  bg-blue"> {{periodo}} meses</span></a></li>
                        <li><a *ngIf="tipoTaxa ==='AOMES'">Taxa: <span class="pull-right badge  bg-blue">{{taxa}} % ao
                              Mês</span></a>
                          <a *ngIf="tipoTaxa ==='AOANO'">Taxa: <span class="pull-right badge  bg-blue">
                              {{taxa}} % ao ano, equivale a {{taxaTransformada
                              | number:
                              "1.2-2"}} % ao mes</span></a>
                        </li>
                        <li><a>Juros: <span class="pull-right badge  bg-blue">{{parcelaTotal.juros | number:
                              "1.2-2"}}</span></a></li>
                        <li><a>Total a Pagar: <span class="pull-right badge  bg-blue">{{parcelaTotal.prestacao | number:
                              "1.2-2"}}</span></a></li>
                      </ul>
                    </div>
                  </div>
                  <h4>Detalhamento</h4>
                </div>
              </div>


              <div class="box-body no-padding">
                <div class='table-responsive'>
                  <table *ngIf="parcelas.length" class="table table-striped">
                    <tbody>
                      <tr>
                        <th>Parcela N</th>
                        <th>Prestação</th>
                        <th>Juros</th>
                        <th>Amortização</th>
                        <th>Saldo Devedor</th>
                      </tr>
                      <tr *ngFor="let parcela of parcelas">
                        <td><span *ngIf="parcela.id === undefined"><b>Total</b></span>{{parcela.id}}</td>
                        <td>R$ {{parcela.prestacao | number: "1.2-2"}}</td>
                        <td>R$ {{parcela.juros | number: "1.2-2"}}</td>
                        <td>R$ {{parcela.amortizacao | number: "1.2-2"}}</td>
                        <td>R$ {{parcela.saldoDevedor | number: "1.2-2"}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="box box-primary">
          <div class="box-header with-border">
            <h3 class="box-title">Conceito</h3>
          </div>
          <div class="box-body">
            <p>A tabela Price é uma forma de pagamento de um financiamento que é bastante utilizada no mercado
              financeiro.
              Nesse sistema, o valor das parcelas é composto por uma parte de amortização e outra de juros,
              sendo que a proporção entre as duas é constante ao longo de todo o período de financiamento.
              Isso significa que a cada mês, a parcela paga pelo tomador de empréstimo é composta por uma parte de juros
              e uma parte de amortização,
              sendo que a proporção entre as duas permanece constante ao longo do período de financiamento.</p>

            <p>Na tabela Price, a amortização é calculada de forma que o valor das prestações mensais
              permaneça constante ao longo de todo o período de financiamento. Os juros são calculados
              multiplicando-se o saldo devedor do mês anterior pela taxa de juros, enquanto a amortização é calculada
              subtraindo-se a parte dos juros da parcela total.</p>

            <p>A principal vantagem da tabela Price é que ela oferece ao tomador de empréstimo a previsibilidade do
              valor das prestações mensais,
              o que facilita o planejamento financeiro. Além disso, essa forma de pagamento pode ser vantajosa para quem
              precisa de um fluxo
              de caixa mais estável e prefere prestações mensais com valores iguais.</p>

            <p>Em resumo, a tabela Price é uma forma de pagamento de um financiamento em que o valor das prestações
              mensais
              permanece constante ao longo de todo o período de financiamento. As parcelas são compostas por uma parte
              de juros e
              uma parte de amortização, sendo que a proporção entre as duas permanece constante. A tabela Price é uma
              forma
              de pagamento que oferece previsibilidade ao tomador de empréstimo e pode ser vantajosa para quem precisa
              de um fluxo de caixa mais estável.</p>
          </div>
        </div>
      </div>
    </div>
  </form>
  {{priceForm.value | json}}
</section>